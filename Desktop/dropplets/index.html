<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
        property="og:title"
        content="ðŸ’§ Kinnnnnnyua's take on water ripples"
      />

      <meta
        content="./demo.gif"
        property="og:image"
      />

      <meta
       property="og:image" 
       itemProp="image" 
      content="./a.jpg"
       />

      <meta
        property="og:description"
        content="Water ripples are just nice"
      />

      <meta
        property="og:url"
        content="https://creamymilk.github.io/dropplets/"
      />

    <title>ðŸ’§ Kinnnnnnyua's take on ripples"</title>
    <style>
      body {
        display: grid;
        place-items: center;
        min-height: 100vh;
        margin: 0;
        padding: 0;
        background-color: rgb(0, 0, 0);
      }

      #canvas {
        width: 50vmin;
      }

      circle,
      rect {
        fill: none;
        stroke: #1791fc;
        stroke-width: 1vmin;
        vector-effect: non-scaling-stroke;
      }

      circle {
        stroke-width: 0.53vmin;
        transform-origin: 50% 50%;
        transform-box: fill-box;
      }
    </style>
  </head>

  <body>
    <div
      style="
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        margin-bottom: 40px;
      "
    >
      <h3>Dropplets ðŸ’§</h3>
      ðŸ‘‡ touch any see some cool stuff ðŸ§™
      <div>ðŸŒŠ ðŸŒŠ</div>
      <a href="https://github.com/CreamyMilk/checker-illustration">
        <code>Show me the code </code>
      </a>
    </div>

    <div id="canvas">
      <svg viewBox="0 0 100 100">
        <rect x="0" y="0" width="100" height="100" id="frammer"></rect>
      </svg>
    </div>

    <div
      style="
        color: white;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        margin-bottom: 40px;
      "
    >
      <label for="colorWell"> <h3>Pick new color ðŸ’™ here ðŸ‘‡ :</h3> </label>
      <input type="color" value="#1791fc" id="colorWell" />
    </div>

    <script>
      // let colorPicker = document.getElementById("c")
      // colorPicker.addEventListener("input", watchColorPicker, false);
      // colorPicker.addEventListener("change", watchColorPicker, false);

      let colorWell;
      let pickedColor = "#1791fc";

      window.addEventListener("load", startup, false);

      function startup() {
        colorWell = document.querySelector("#colorWell");
        colorWell.value = pickedColor;
        colorWell.addEventListener("input", updateFirst, false);
        colorWell.addEventListener("change", updateAll, false);
        colorWell.select();
      }

      function updateFirst(event) {
        pickedColor = event.target.value;

        document.getElementById("frammer").style.stroke = pickedColor;
        document.querySelectorAll("circle").forEach((s) => {
          s.style.stroke = pickedColor;
        });
      }

      function updateAll(event) {
        pickedColor = event.target.value;

        document.getElementById("frammer").style.stroke = pickedColor;
        document.querySelectorAll("circle").forEach((s) => {
          s.style.stroke = pickedColor;
        });
      }

      function watchColorPicker(event) {
        alert(event.target.value);
      }

      const createCircle = (a, b) => {
        const c = document.createElementNS(svgns, "circle");
        c.setAttributeNS(null, "cx", a),
          c.setAttributeNS(null, "cy", b),
          c.setAttributeNS(null, "r", 1),
          svg.appendChild(c),
          animate(c);
      };

      const getProgress = ({ elapsed: a, total: b }) => Math.min(a / b, 1);

      const animate = (a) => {
        const b = { start: performance.now(), total: 3e4 },
          c = (d) => {
            b.elapsed = d - b.start;
            const e = getProgress(b);
            (a.style.stroke = pickedColor),
              (a.style.transform = `scale(${200 * e})`),
              1 > e ? requestAnimationFrame(c) : a.parentNode.removeChild(a);
          };
        requestAnimationFrame(c);
      };

      const svg = document.querySelector("svg");
      const svgns = "http://www.w3.org/2000/svg";
      const RIPPLES = 5;

      svg.addEventListener("click", (a) => {
        const b = a.target.getBoundingClientRect();
        const c = a.clientX - b.left;
        const d = a.clientY - b.top;
        const e = 100 * (c / b.width);
        const f = 100 * (d / b.width);

        console.log({ b, c, d, e, f });

        for (let b = 0; b < RIPPLES; b++)
          setTimeout(() => {
            createCircle(e, f);
          }, 1200 * b);
      });
    </script>
  </body>
</html>
